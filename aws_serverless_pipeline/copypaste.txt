aws cognito-idp initiate-auth \
  --region us-west-2 \
  --auth-flow USER_PASSWORD_AUTH \
  --client-id 5s2o06b9q107b8v0u45f41bpr3 \
  --auth-parameters USERNAME=firstuser@example.com,PASSWORD=Test1234

aws cognito-idp respond-to-auth-challenge \
  --region us-west-2 \
  --client-id 5s2o06b9q107b8v0u45f41bpr3 \
  --challenge-name NEW_PASSWORD_REQUIRED \
  --challenge-responses USERNAME=firstuser@example.com,NEW_PASSWORD=Newpassword123 \
  --session "AYABePOoOJGBXOYMIf5sogby_OkAHQABAAdTZXJ2aWNlABBDb2duaXRvVXNlclBvb2xzAAEAB2F3cy1rbXMAS2Fybjphd3M6a21zOnVzLXdlc3QtMjowMTU3MzY3MjcxOTg6a2V5LzI5OTFhNGE5LTM5YTAtNDQ0Mi04MWU4LWRkYjY4NTllMTg2MQC4AQIBAHjXDWxLAGtdvKY1QbHF71SIL_GK9v5YJf053RywJpetMAFUudBu8eUqr-rOplBawoTDAAAAfjB8BgkqhkiG9w0BBwagbzBtAgEAMGgGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMdEt4ZSKwJip5Uv5JAgEQgDt7D14df3DmZem7fcVugZScOpbF5yQVoZxP4_I7Bm57o36e6S4h704AGloNtWqeepjyVJg1XvpucMzpCgIAAAAADAAAEAAAAAAAAAAAAAAAAAC2RJQ7qTIpVn6k2z7GoUA0_____wAAAAEAAAAAAAAAAAAAAAEAAADZ9l7cOXRRpAlZwjgtXGZV5TACrurI_x-wliIoOud971EdDZEqWCmewRfXqU9sqyLbZkX1VdfMOkkXhAK_iz07xySQTD7AuvqQgSop3leeKckEwqtHqxu-ZykAduUNkL4m91YiCgqTVDEyo735bTvuZRo8qn0wIAjZZIbFZYL-wZ_3XMT39FUmOZRvhIllfqt0SB7IohwCF6_38fH0mYpArx9E9Pm3IviKXvKVV5syOFgyUEkjH-FKE6FhdAEVk5m5UNNYrKCPsXwkrf1E7mODZ3yf0dKieadycfV3yBRYYn27E7GLVpGCK0M"

curl -X GET \
  -H "Authorization: Bearer eyJraWQiOiI4QUdcL25oeXBlVDNNdVptV29SQ1NJWEt1Q2s4VnZ6dzJsemJYNkZMVTJpQT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJjOGMxYTM3MC1mMDgxLTcwOWYtZmQ4MC1hMGU1YWI0OWFiNmYiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLXdlc3QtMi5hbWF6b25hd3MuY29tXC91cy13ZXN0LTJfWGFIYWpaRXp0IiwiY29nbml0bzp1c2VybmFtZSI6ImZpcnN0dXNlcjEyMzQiLCJvcmlnaW5fanRpIjoiYzdiZjBmMDgtMmY0Yi00NDQzLThkNjctYTcxYTQ3MWNjYzcyIiwiYXVkIjoiNXMybzA2YjlxMTA3Yjh2MHU0NWY0MWJwcjMiLCJldmVudF9pZCI6ImRiOGMyN2FiLWQxMDYtNDlkYi04YWEzLTJkNmQ5NjUxMTgwZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzQzNDE2OTg0LCJleHAiOjE3NDM0MjA1ODQsImlhdCI6MTc0MzQxNjk4NCwianRpIjoiZTE2ZWYwNjMtZGYxYS00ZWQ0LTg0MzUtNTc0NmQyZWNhZmNkIiwiZW1haWwiOiJmaXJzdHVzZXJAZXhhbXBsZS5jb20ifQ.EqzOEwh2H_xgdM4TR9j85VxnwFhMHdC0vq2yNejxCwMNUTBuqvIgzaTX-iWalAyCHWJEbHvBzGY_dHJY5dPnbSrMy1_rXlBQirnIQSooDCffIzeE3OQ5JfWBICSHcpmQgZ6jf9GXkfFmkk6I8SE2-ZTNtWs3FAu4a-hV41fu-Cm8T3eCNyYdJ3k1kkq14WyvoNwj8sr4jwKVQzqpJoOLnqNd16S2JWMzEfPNr3pWjFaZ3pjOKR-pM51-GwcBNc5cuVNNQZOs1z3Zzb-4tlBzXWjCsTQUrn7G7MhEW2qDMykBJ-bpCLHgbghanXwuLLF22ICLfcrFPMbAA6qmHL2_dQ" \
  https://4dc74m9y8e.execute-api.us-west-2.amazonaws.com/prod/messages

curl -X POST \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer \
eyJraWQiOiI4QUdcL25oeXBlVDNNdVptV29SQ1NJWEt1Q2s4VnZ6dzJsemJYNkZMVTJpQT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJjOGMxYTM3MC1mMDgxLTcwOWYtZmQ4MC1hMGU1YWI0OWFiNmYiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLXdlc3QtMi5hbWF6b25hd3MuY29tXC91cy13ZXN0LTJfWGFIYWpaRXp0IiwiY29nbml0bzp1c2VybmFtZSI6ImZpcnN0dXNlcjEyMzQiLCJvcmlnaW5fanRpIjoiYzdiZjBmMDgtMmY0Yi00NDQzLThkNjctYTcxYTQ3MWNjYzcyIiwiYXVkIjoiNXMybzA2YjlxMTA3Yjh2MHU0NWY0MWJwcjMiLCJldmVudF9pZCI6ImRiOGMyN2FiLWQxMDYtNDlkYi04YWEzLTJkNmQ5NjUxMTgwZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzQzNDE2OTg0LCJleHAiOjE3NDM0MjA1ODQsImlhdCI6MTc0MzQxNjk4NCwianRpIjoiZTE2ZWYwNjMtZGYxYS00ZWQ0LTg0MzUtNTc0NmQyZWNhZmNkIiwiZW1haWwiOiJmaXJzdHVzZXJAZXhhbXBsZS5jb20ifQ.EqzOEwh2H_xgdM4TR9j85VxnwFhMHdC0vq2yNejxCwMNUTBuqvIgzaTX-iWalAyCHWJEbHvBzGY_dHJY5dPnbSrMy1_rXlBQirnIQSooDCffIzeE3OQ5JfWBICSHcpmQgZ6jf9GXkfFmkk6I8SE2-ZTNtWs3FAu4a-hV41fu-Cm8T3eCNyYdJ3k1kkq14WyvoNwj8sr4jwKVQzqpJoOLnqNd16S2JWMzEfPNr3pWjFaZ3pjOKR-pM51-GwcBNc5cuVNNQZOs1z3Zzb-4tlBzXWjCsTQUrn7G7MhEW2qDMykBJ-bpCLHgbghanXwuLLF22ICLfcrFPMbAA6qmHL2_dQ" \
  -d '{"sender": "Simon", "content": "Posting with auth, baby!"}' \
  https://4dc74m9y8e.execute-api.us-west-2.amazonaws.com/prod/messages

curl -X POST \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"sender": "Simon", "content": "Posting with auth, baby!"}' \
  https://4dc74m9y8e.execute-api.us-west-2.amazonaws.com/prod/messages
